<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Документ без названия</title>
<link href="viewCode.css" rel="stylesheet" type="text/css" />
</head>

<body>

<h3><a href="../index.html">The neo4jScCore Manual</a> > <a href="../AppendixA/AppendixA.html">Приложение А</a> > GraphManager
</h3>
<hr />
<h2>&nbsp;Пример создания ненаправленного графа</h2>
<p>В данном примере рассмотрены только методы позволяющие создать ненаправленный граф на основе вершин и дуг представленных     в <a href="CreateSCGraphSample.html">примере создания простого графа</a>.</p>
<pre class=pre0><div id="LC1"></div><div id="LC2"></div><div id="LC3">import java.util.ArrayList;</div><div id="LC4">import java.util.Iterator;</div><div id="LC5">import java.util.List;</div><div id="LC6"><br /></div><div id="LC7">import net.ostis.sccore.iterators.ScConstraint;</div><div id="LC8">import net.ostis.sccore.iterators.ScIteratorTypes;</div><div id="LC9">import net.ostis.sccore.scelements.ScNode;</div><div id="LC10">import net.ostis.sccore.scfactory.ScFactory;</div><div id="LC11">import net.ostis.sccore.scperformer.ScPerformer;</div><div id="LC12">import net.ostis.sccore.types.ScElementTypes;</div><div id="LC13"><br /></div><div id="LC14">/**</div><div id="LC15"> * @author yaskoam</div><div id="LC16"> */</div><div id="LC17">public class GraphManager {</div><div id="LC18"><br /></div><div id="LC19">    public static final List&lt;String&gt; constNodeTypes = new ArrayList&lt;String&gt;();</div><div id="LC20">    public static final List&lt;String&gt; posConstArcTypes = new ArrayList&lt;String&gt;();</div><div id="LC21">    public static final String VERTEX_ATTR_NAME = &quot;vertex&quot;;</div><div id="LC22">    public static final String EDGE_ATTR_NAME = &quot;edge&quot;;</div><div id="LC23"><br /></div><div id="LC24">    static {</div><div id="LC25">        constNodeTypes.add(ScElementTypes.NODE);</div><div id="LC26">        constNodeTypes.add(ScElementTypes.CONST);</div><div id="LC27"><br /></div><div id="LC28">        posConstArcTypes.add(ScElementTypes.ARC);</div><div id="LC29">        posConstArcTypes.add(ScElementTypes.POS);</div><div id="LC30">        posConstArcTypes.add(ScElementTypes.CONST);</div><div id="LC31">    }</div><div id="LC32"><br /></div><div id="LC33">    /**</div><div id="LC34">     * Method that create undirected graph.</div><div id="LC35">     *</div><div id="LC36">     * @param performer object</div><div id="LC37">     * @param graphName graph name</div><div id="LC38">     * @param graphVertex list of graph vertexes name</div><div id="LC39">     * @param graphEdges list of string that</div><div id="LC40">     * presented connection between nodes.</div><div id="LC41">     * for example &quot;A-B&quot;</div><div id="LC42">     * @return node of created graph</div><div id="LC43">     */</div><div id="LC44">    public static ScNode createUndirectedGraph(ScPerformer performer, String graphName,</div><div id="LC45">        List&lt;String&gt; graphVertex, List&lt;String&gt; graphEdges) {</div><div id="LC46"><br /></div><div id="LC47">        ScFactory factory = performer.getScFactory();</div><div id="LC48"><br /></div><div id="LC49">        //Create key nodes</div><div id="LC50">        ScNode graphNode = factory.createScNode(graphName, constNodeTypes);</div><div id="LC51">        ScNode vertexAttr = factory.createScNode(VERTEX_ATTR_NAME, constNodeTypes);</div><div id="LC52">        ScNode edgeAttr = factory.createScNode(EDGE_ATTR_NAME, constNodeTypes);</div><div id="LC53"><br /></div><div id="LC54">        //Create graph nodes</div><div id="LC55">        for (String currentVertex : graphVertex) {</div><div id="LC56">            ScNode scNode = factory.createScNode(currentVertex, constNodeTypes);</div><div id="LC57">            factory.generate_5_f_a_f_a_f(graphNode, posConstArcTypes, scNode, posConstArcTypes, vertexAttr);</div><div id="LC58">        }</div><div id="LC59"><br /></div><div id="LC60">        for (String currentEdge : graphEdges) {</div><div id="LC61">            String[] twoVertex = currentEdge.split(&quot;-&quot;);</div><div id="LC62">            ScNode firstVertex = performer.findScNodeByName(twoVertex[0]);</div><div id="LC63">            ScNode secondVertex = performer.findScNodeByName(twoVertex[1]);</div><div id="LC64">            ScNode edgeNode = factory.createScNode();</div><div id="LC65">            factory.generate_5_f_a_f_a_f(graphNode, posConstArcTypes, edgeNode, posConstArcTypes, edgeAttr);</div><div id="LC66">            factory.generate_3_f_a_f(edgeNode, posConstArcTypes, firstVertex);</div><div id="LC67">            factory.generate_3_f_a_f(edgeNode, posConstArcTypes, secondVertex);</div><div id="LC68">        }</div><div id="LC69"><br /></div><div id="LC70">        return graphNode;</div><div id="LC71">    }</div><div id="LC72"><br /></div><div id="LC73">    public static void printUndirectedGraph(ScPerformer performer, ScNode graphNode) {</div><div id="LC74">        //Find all vertexes</div><div id="LC75">        ScNode vertexAttr = performer.findScNodeByName(VERTEX_ATTR_NAME);</div><div id="LC76">        Iterator vertexIterator = performer.createIterator(ScIteratorTypes.F_A_A_A_F, graphNode, posConstArcTypes, constNodeTypes,</div><div id="LC77">            posConstArcTypes, vertexAttr);</div><div id="LC78"><br /></div><div id="LC79">        System.out.println(&quot;All graph vertexes: &quot;);</div><div id="LC80">        while (vertexIterator.hasNext()) {</div><div id="LC81">            ScConstraint constraint = (ScConstraint) vertexIterator.next();</div><div id="LC82">            System.out.println(((ScNode) constraint.getElement(3)).getName() + &quot; &quot;);</div><div id="LC83">        }</div><div id="LC84"><br /></div><div id="LC85">        //Find all edges</div><div id="LC86">        System.out.println(&quot;All graph edges: &quot;);</div><div id="LC87">        ScNode edgeAttr = performer.findScNodeByName(EDGE_ATTR_NAME);</div><div id="LC88">        Iterator edgeIterator = performer.createIterator(ScIteratorTypes.F_A_A_A_F, graphNode, posConstArcTypes,</div><div id="LC89">            new ArrayList&lt;String&gt;(), posConstArcTypes, edgeAttr);</div><div id="LC90"><br /></div><div id="LC91">        while (edgeIterator.hasNext()) {</div><div id="LC92">            ScConstraint constraint = (ScConstraint) edgeIterator.next();</div><div id="LC93">            ScNode edgeNode = (ScNode) constraint.getElement(3);</div><div id="LC94">            Iterator incidentIterator = performer.createIterator(ScIteratorTypes.F_A_A, edgeNode, posConstArcTypes, constNodeTypes);</div><div id="LC95"><br /></div><div id="LC96">            ScConstraint constraint1 = (ScConstraint) incidentIterator.next();</div><div id="LC97">            ScConstraint constraint2 = (ScConstraint) incidentIterator.next();</div><div id="LC98"><br /></div><div id="LC99">            System.out.print(((ScNode) constraint1.getElement(3)).getName());</div><div id="LC100">            System.out.print(&quot;--&quot;);</div><div id="LC101">            System.out.print(((ScNode) constraint2.getElement(3)).getName());</div><div id="LC102">            System.out.println();</div><div id="LC103">        }</div><div id="LC104">    }</div><div id="LC105"><br /></div><div id="LC106">    public static void deleteUndirectedGraph(ScPerformer performer, ScNode graphNode) {</div><div id="LC107">        Iterator iterator = performer.createIterator(ScIteratorTypes.F_A_A, graphNode, new ArrayList&lt;String&gt;(),</div><div id="LC108">            new ArrayList&lt;String&gt;());</div><div id="LC109"><br /></div><div id="LC110">        while (iterator.hasNext()) {</div><div id="LC111">            ScNode currentGraphElement = (ScNode) ((ScConstraint) iterator.next()).getElement(3);</div><div id="LC112">            performer.deleteScNode(currentGraphElement);</div><div id="LC113">        }</div><div id="LC114"><br /></div><div id="LC115">        performer.deleteScNode(graphNode);</div><div id="LC116">    }</div><div id="LC117">}</div>
</pre>
<p>&nbsp;</p>
</body>
</html>
